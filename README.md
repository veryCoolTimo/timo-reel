# TimoReel

TimoReel ‚Äî —ç—Ç–æ Telegram-–±–æ—Ç –∏ –≤—Å—Ç—Ä–æ–µ–Ω–Ω–æ–µ WebApp-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, –∫–æ—Ç–æ—Ä–æ–µ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å–∫–∞—á–∏–≤–∞–µ—Ç –≤–∏–¥–µ–æ –ø–æ —Å—Å—ã–ª–∫–∞–º –∏–∑ Instagram –∏ TikTok, –ø—Ä–∏—Å—ã–ª–∞–µ–º—ã–µ –≤ –ª—é–±–æ–π —á–∞—Ç, –∏ —Å–æ–±–∏—Ä–∞–µ—Ç –∏—Ö –≤ ¬´–ª–µ–Ω—Ç—É¬ª –Ω–∞–ø–æ–¥–æ–±–∏–µ TikTok/Instagram.

## –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏

- ü§ñ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ –≤–∏–¥–µ–æ –∏–∑ Instagram –∏ TikTok
- üì± WebApp –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –≤ —Å—Ç–∏–ª–µ TikTok —Å —Ç–µ–º–Ω–æ–π —Ç–µ–º–æ–π
- ‚ù§Ô∏è –°–∏—Å—Ç–µ–º–∞ –ª–∞–π–∫–æ–≤ –∏ –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–µ–≤
- üîá –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç—å –æ—Ç–∫–ª—é—á–µ–Ω–∏—è —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π
- üìä –ò—Å—Ç–æ—Ä–∏—è —Ä–µ–∞–∫—Ü–∏–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- üíæ –õ–æ–∫–∞–ª—å–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ JSON
- üåê REST API –¥–ª—è WebApp

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
timo-reel/
‚îú‚îÄ‚îÄ backend/                    # Python Telegram Bot + API
‚îÇ   ‚îú‚îÄ‚îÄ bot.py                 # –¢–æ—á–∫–∞ –≤—Ö–æ–¥–∞ –±–æ—Ç–∞
‚îÇ   ‚îú‚îÄ‚îÄ api_server.py          # API —Å–µ—Ä–≤–µ—Ä –¥–ª—è WebApp
‚îÇ   ‚îú‚îÄ‚îÄ test_bot.py            # –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –º–æ–¥—É–ª–µ–π
‚îÇ   ‚îú‚îÄ‚îÄ test_api.py            # –¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç API
‚îÇ   ‚îú‚îÄ‚îÄ handlers/              # –û–±—Ä–∞–±–æ—Ç—á–∏–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ link_handler.py    # –ü–∞—Ä—Å–∏–Ω–≥ —Å—Å—ã–ª–æ–∫ –∏ –∑–∞–≥—Ä—É–∑–∫–∞
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ webapp_handler.py  # API endpoints –¥–ª—è WebApp
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ pm_commands.py     # –ö–æ–º–∞–Ω–¥—ã –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö
‚îÇ   ‚îú‚îÄ‚îÄ downloader/            # –ó–∞–≥—Ä—É–∑–∫–∞ –≤–∏–¥–µ–æ (yt-dlp)
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ video_downloader.py
‚îÇ   ‚îú‚îÄ‚îÄ storage/               # JSON —Ö—Ä–∞–Ω–∏–ª–∏—â–µ
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ metadata.json      # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –≤–∏–¥–µ–æ –∏ —Ä–µ–∞–∫—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ utils/                 # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –∏ –∫–µ—à
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ config.py          # –ù–∞—Å—Ç—Ä–æ–π–∫–∏
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ cache.py           # –†–∞–±–æ—Ç–∞ —Å JSON
‚îÇ   ‚îî‚îÄ‚îÄ requirements.txt       # Python –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îú‚îÄ‚îÄ webapp/                    # React WebApp
‚îÇ   ‚îú‚îÄ‚îÄ src/                   # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îú‚îÄ‚îÄ dist/                  # –°–æ–±—Ä–∞–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îÇ   ‚îî‚îÄ‚îÄ package.json           # Node.js –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
‚îî‚îÄ‚îÄ docs/                      # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ –∑–∞–ø—É—Å–∫

### –®–∞–≥ 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

#### Backend (Python)
```bash
cd backend
python3 -m venv venv
source venv/bin/activate  # –ù–∞ Windows: venv\Scripts\activate
pip install -r requirements.txt
```

#### Frontend (Node.js)
```bash
cd webapp
npm install
```

### –®–∞–≥ 2: –ù–∞—Å—Ç—Ä–æ–π–∫–∞

1. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ `backend/env_example.txt` –≤ `backend/.env`
2. –ü–æ–ª—É—á–∏—Ç–µ —Ç–æ–∫–µ–Ω –±–æ—Ç–∞ —É [@BotFather](https://t.me/BotFather)
3. –ó–∞–ø–æ–ª–Ω–∏—Ç–µ —Ñ–∞–π–ª `.env`:

```env
BOT_TOKEN=your_bot_token_here
HOST=0.0.0.0
PORT=8000
```

### –®–∞–≥ 3: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ä–∞–±–æ—Ç—É –≤—Å–µ—Ö –º–æ–¥—É–ª–µ–π:
```bash
cd backend
source venv/bin/activate
python test_bot.py
```

### –®–∞–≥ 4: –ó–∞–ø—É—Å–∫ —Å–∏—Å—Ç–µ–º—ã

#### –ó–∞–ø—É—Å–∫ –±–æ—Ç–∞:
```bash
cd backend
source venv/bin/activate
python bot.py
```

#### –ó–∞–ø—É—Å–∫ API —Å–µ—Ä–≤–µ—Ä–∞ (–≤ –æ—Ç–¥–µ–ª—å–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ):
```bash
cd backend
source venv/bin/activate
python api_server.py
```

#### –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API:
```bash
cd backend
source venv/bin/activate
python test_api.py
```

### –®–∞–≥ 5: –°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫ frontend

```bash
cd webapp
npm run build  # –î–ª—è production
# –∏–ª–∏
npm run dev    # –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
```

## API Endpoints

API —Å–µ—Ä–≤–µ—Ä –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è –Ω–∞ –ø–æ—Ä—Ç—É `8001` (PORT + 1) –∏ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç —Å–ª–µ–¥—É—é—â–∏–µ endpoints:

- `GET /api/health` - Health check
- `GET /api/feed?chat_id=<id>` - –ü–æ–ª—É—á–∏—Ç—å –ª–µ–Ω—Ç—É –≤–∏–¥–µ–æ –¥–ª—è —á–∞—Ç–∞
- `POST /api/react` - –û—Ç–ø—Ä–∞–≤–∏—Ç—å —Ä–µ–∞–∫—Ü–∏—é (–ª–∞–π–∫/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π)
- `GET /api/video/<file_id>` - –ü–æ–ª—É—á–∏—Ç—å –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –≤–∏–¥–µ–æ
- `GET /api/stats` - –ü–æ–ª—É—á–∏—Ç—å –æ–±—â—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É

### –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è API:

```bash
# Health check
curl http://localhost:8001/api/health

# –ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É
curl http://localhost:8001/api/stats

# –ü–æ–ª—É—á–∏—Ç—å –ª–µ–Ω—Ç—É –¥–ª—è —á–∞—Ç–∞
curl "http://localhost:8001/api/feed?chat_id=123456789"

# –û—Ç–ø—Ä–∞–≤–∏—Ç—å –ª–∞–π–∫
curl -X POST http://localhost:8001/api/react \
  -H "Content-Type: application/json" \
  -d '{"user_id": 123456789, "file_id": "video_id", "type": "like"}'
```

## –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞

### –í –≥—Ä—É–ø–ø–æ–≤—ã—Ö —á–∞—Ç–∞—Ö:
- `/start` - –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ
- `/help` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –ø–æ–º–æ—â—å
- –ü—Ä–æ—Å—Ç–æ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ —Å—Å—ã–ª–∫—É –Ω–∞ –≤–∏–¥–µ–æ!

### –í –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö:
- `/start` - –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏–µ –∏ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏
- `/help` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –ø–æ–º–æ—â—å
- `/status` - –≤–∞—à —Å—Ç–∞—Ç—É—Å –∏ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- `/mute` - –æ—Ç–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∞–∫—Ü–∏—è—Ö
- `/unmute` - –≤–∫–ª—é—á–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ —Ä–µ–∞–∫—Ü–∏—è—Ö
- `/likes` - –ø–æ–∫–∞–∑–∞—Ç—å –∏—Å—Ç–æ—Ä–∏—é –≤–∞—à–∏—Ö —Ä–µ–∞–∫—Ü–∏–π

## –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Å—Å—ã–ª–∫–∏

### Instagram:
- `https://instagram.com/p/ABC123/`
- `https://instagram.com/reel/ABC123/`
- `https://instagram.com/tv/ABC123/`
- `https://instagram.com/stories/user/123/`

### TikTok:
- `https://tiktok.com/@user/video/123456`
- `https://vm.tiktok.com/ABC123/`
- `https://vt.tiktok.com/ABC123/`
- `https://tiktok.com/t/ABC123/`

## –°—Ç–∞—Ç—É—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏

‚úÖ **–≠—Ç–∞–ø 1: –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è** (–∑–∞–≤–µ—Ä—à–µ–Ω)
- –°–æ–∑–¥–∞–Ω–∞ —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
- –ù–∞—Å—Ç—Ä–æ–µ–Ω—ã –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
- –°–æ–∑–¥–∞–Ω –±–∞–∑–æ–≤—ã–π React –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- –ù–∞—Å—Ç—Ä–æ–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∫–∏

‚úÖ **–≠—Ç–∞–ø 2: –ë–∞–∑–æ–≤—ã–π –±–æ—Ç –∏ –∞–≤—Ç–æ–∑–∞–≥—Ä—É–∑–∫–∞** (–∑–∞–≤–µ—Ä—à–µ–Ω)
- –°–æ–∑–¥–∞–Ω –æ—Å–Ω–æ–≤–Ω–æ–π —Ñ–∞–π–ª –±–æ—Ç–∞ (`bot.py`)
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–∞—Ä—Å–∏–Ω–≥ —Å—Å—ã–ª–æ–∫ Instagram/TikTok
- –ü–æ–¥–∫–ª—é—á–µ–Ω yt-dlp –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –≤–∏–¥–µ–æ
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤–∏–¥–µ–æ –≤ —á–∞—Ç
- –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö –≤ JSON
- –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏–π
- –°–∏—Å—Ç–µ–º–∞ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

‚úÖ **–≠—Ç–∞–ø 3: –•—Ä–∞–Ω–µ–Ω–∏–µ –∏ –¥–æ—Å—Ç—É–ø –∫ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–º** (–∑–∞–≤–µ—Ä—à–µ–Ω)
- –†–∞—Å—à–∏—Ä–µ–Ω–∞ —Å–∏—Å—Ç–µ–º–∞ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö
- –°–æ–∑–¥–∞–Ω API —Å–µ—Ä–≤–µ—Ä (`api_server.py`) —Å aiohttp
- –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã REST API endpoints –¥–ª—è WebApp
- –°–∏—Å—Ç–µ–º–∞ —Ä–µ–∞–∫—Ü–∏–π (–ª–∞–π–∫–∏/–∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏)
- CORS –ø–æ–¥–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
- –ü–æ–ª–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ API
- –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ —Ä–∞–∑–º–µ—Ä–∞ —Ö—Ä–∞–Ω–∏–ª–∏—â–∞

üîÑ **–°–ª–µ–¥—É—é—â–∏–µ —ç—Ç–∞–ø—ã:**
- –≠—Ç–∞–ø 4: –í–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (WebApp)
- –≠—Ç–∞–ø 5: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ä–µ–∞–∫—Ü–∏–π –∏ –ª–∏—á–Ω—ã–µ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è
- –≠—Ç–∞–ø 6: –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è WebApp —Å –±–æ—Ç–æ–º
- –≠—Ç–∞–ø 7: –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –æ—Ç–ª–∞–¥–∫–∞
- –≠—Ç–∞–ø 8: –î–µ–ø–ª–æ–π –∏ –∑–∞–ø—É—Å–∫

## –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Backend:** Python, python-telegram-bot, yt-dlp, aiohttp
- **API:** aiohttp, REST endpoints, JSON storage
- **Frontend:** React, Vite, CSS3 (–≥—Ä–∞–¥–∏–µ–Ω—Ç—ã, —Ç–µ–º–Ω–∞—è —Ç–µ–º–∞)
- **–•—Ä–∞–Ω–µ–Ω–∏–µ:** JSON —Ñ–∞–π–ª—ã —Å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–º –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ–º —Ä–∞–∑–º–µ—Ä–∞
- **–î–µ–ø–ª–æ–π:** Docker (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)

## –õ–∏—Ü–µ–Ω–∑–∏—è

MIT
